<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSS Muriloso</title>
</head>
<body>
    <noscript>
        <h1>Este site precisa do javascript ligado.</h1>
    </noscript>
    <div class="content">
        <h1>Carregando...</h1>
    </div>
    <script>
        async function main() {
            rss_json = new Object();
            body = document.getElementsByClassName('content')[0];

            await fetch('rss.json')
                .then(data => data.text())
                .then(text => JSON.parse(text))
                .then(json => rss_json = json);

            body.innerHTML = '';

            Object.entries(rss_json).forEach(itens => {
                new_div = document.createElement('div');
                br = document.createElement('br');

                title = document.createElement('h1');
                title.innerHTML = itens[0];
                new_div.appendChild(title);

                itens[1].forEach(item => {
                    link = document.createElement('a');
                    link.innerHTML = item.title;
                    link.href = item.link;

                    br = document.createElement('br');
                    new_div.appendChild(br);
                    new_div.appendChild(link);
                });

                body.appendChild(new_div);
            })
        }

        main();
    </script>
</body>
</html>